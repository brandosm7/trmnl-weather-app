<style>
  .wc{width:100%;height:100%;font-family:sans-serif;padding:16px 20px;box-sizing:border-box;display:flex;flex-direction:column}
  .cr{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
  .cl{display:flex;align-items:center;gap:10px}
  .ct{font-size:72px;font-weight:700;line-height:1}
  .ts{font-size:28px;font-weight:400;vertical-align:super}
  .cs{text-align:right;font-size:18px;line-height:1.6}
  .ci svg{width:80px;height:80px}
  .hh{display:grid;grid-template-columns:repeat(19,1fr);border-top:1px solid #888;padding-top:8px}
  .hs{text-align:center}
  .htl{font-size:14px;margin-bottom:2px}
  .hpv{font-size:14px;font-weight:600}
  .bc{display:grid;grid-template-columns:repeat(19,1fr);align-items:flex-end;height:62px;margin:2px 0}
  .bs{display:flex;justify-content:center;align-items:flex-end;height:100%}
  .b{width:70%;background:#000;min-height:2px}
  .wr{padding:6px 0;border-top:1px solid #888}
  .dr{display:flex;justify-content:space-between;border-top:1px solid #888;padding-top:8px;margin-top:auto}
  .ds{flex:1;text-align:center}
  .ddn{font-size:14px;font-weight:600;margin-bottom:4px}
  .dic{margin:2px 0;display:flex;justify-content:center}
  .dic svg{width:32px;height:32px}
  .dt{font-size:14px}
  .dhg{font-weight:700}
  .dlw{margin-left:4px;opacity:0.6}
</style>

<div class="wc">
  <!-- Current Conditions -->
  <div class="cr">
    <div class="cl">
      <div class="ci">
        {% if ci == "clear" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="24" cy="24" r="10"/><line x1="24" y1="2" x2="24" y2="8"/><line x1="24" y1="40" x2="24" y2="46"/><line x1="2" y1="24" x2="8" y2="24"/><line x1="40" y1="24" x2="46" y2="24"/><line x1="8.3" y1="8.3" x2="12.5" y2="12.5"/><line x1="35.5" y1="35.5" x2="39.7" y2="39.7"/><line x1="8.3" y1="39.7" x2="12.5" y2="35.5"/><line x1="35.5" y1="12.5" x2="39.7" y2="8.3"/></svg>
        {% elsif ci == "mostly_clear" or ci == "partly_cloudy" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="20" cy="16" r="8"/><line x1="20" y1="2" x2="20" y2="6"/><line x1="6" y1="16" x2="2" y2="16"/><line x1="9" y1="6" x2="11.5" y2="8.5"/><line x1="31" y1="6" x2="28.5" y2="8.5"/><line x1="34" y1="16" x2="36" y2="16"/><path d="M14 32 Q14 25 21 25 Q22 20 28 20 Q35 20 35 27 Q40 27 40 32 Q40 37 35 37 L18 37 Q14 37 14 32 Z"/></svg>
        {% elsif ci == "overcast" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 34 Q12 27 19 27 Q20 22 26 22 Q33 22 33 29 Q38 29 38 34 Q38 39 33 39 L16 39 Q12 39 12 34 Z"/><path d="M20 27 Q20 21 26 21 Q27 17 32 17 Q38 17 38 23 Q42 23 42 27 Q42 30 39 31" opacity="0.5"/></svg>
        {% elsif ci == "fog" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="8" y1="18" x2="40" y2="18"/><line x1="6" y1="24" x2="42" y2="24"/><line x1="8" y1="30" x2="40" y2="30"/><line x1="12" y1="36" x2="36" y2="36"/></svg>
        {% elsif ci == "drizzle" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 24 Q12 17 19 17 Q20 12 26 12 Q33 12 33 19 Q38 19 38 24 Q38 29 33 29 L16 29 Q12 29 12 24 Z"/><line x1="16" y1="33" x2="15" y2="37"/><line x1="24" y1="33" x2="23" y2="37"/><line x1="32" y1="33" x2="31" y2="37"/></svg>
        {% elsif ci == "rain" or ci == "showers" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 22 Q12 15 19 15 Q20 10 26 10 Q33 10 33 17 Q38 17 38 22 Q38 27 33 27 L16 27 Q12 27 12 22 Z"/><line x1="14" y1="31" x2="12" y2="38"/><line x1="21" y1="31" x2="19" y2="38"/><line x1="28" y1="31" x2="26" y2="38"/><line x1="35" y1="31" x2="33" y2="38"/></svg>
        {% elsif ci == "snow" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 22 Q12 15 19 15 Q20 10 26 10 Q33 10 33 17 Q38 17 38 22 Q38 27 33 27 L16 27 Q12 27 12 22 Z"/><line x1="16" y1="32" x2="16" y2="34"/><line x1="14.5" y1="33" x2="17.5" y2="33"/><line x1="24" y1="32" x2="24" y2="34"/><line x1="22.5" y1="33" x2="25.5" y2="33"/><line x1="32" y1="32" x2="32" y2="34"/><line x1="30.5" y1="33" x2="33.5" y2="33"/></svg>
        {% elsif ci == "thunderstorm" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 20 Q12 13 19 13 Q20 8 26 8 Q33 8 33 15 Q38 15 38 20 Q38 25 33 25 L16 25 Q12 25 12 20 Z"/><polyline points="22,28 18,35 24,35 20,44" stroke-width="3"/></svg>
        {% else %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="24" cy="24" r="10"/></svg>
        {% endif %}
      </div>
      <div class="ct">{{ ct }}<span class="ts">{{ cs }}</span></div>
    </div>
    <div class="cs">
      Feels Like: {{ cf }}{{ cs }}<br>
      Precipitation: {{ cp }}%<br>
      Humidity: {{ ch }}%<br>
      Wind: {{ cw }} {{ cu }}
    </div>
  </div>

  <!-- Hourly Header - 19-column grid with 7 labels at every 3rd position -->
  <div class="hh">
    {% for i in (0..6) %}
    {% assign col = i | times: 3 | plus: 1 %}
    <div class="hs" style="grid-column:{{ col }}">
      <div class="htl">{% case i %}{% when 0 %}{{ ht0 }}{% when 1 %}{{ ht1 }}{% when 2 %}{{ ht2 }}{% when 3 %}{{ ht3 }}{% when 4 %}{{ ht4 }}{% when 5 %}{{ ht5 }}{% when 6 %}{{ ht6 }}{% endcase %}</div>
      <div class="hpv">{% case i %}{% when 0 %}{{ hp0 }}{% when 1 %}{{ hp1 }}{% when 2 %}{{ hp2 }}{% when 3 %}{{ hp3 }}{% when 4 %}{{ hp4 }}{% when 5 %}{{ hp5 }}{% when 6 %}{{ hp6 }}{% endcase %}%</div>
    </div>
    {% endfor %}
  </div>

  <!-- Precipitation Bar Chart - 19 bars from pre-computed heights -->
  <div class="bc">
    {% assign bars = pb | split: "," %}
    {% for bar in bars %}
    <div class="bs"><div class="b" style="height:{{ bar }}px"></div></div>
    {% endfor %}
  </div>

  <!-- Wind Speed Line Graph -->
  <div class="wr">{{ wg }}</div>

  <!-- 7-Day Forecast -->
  <div class="dr">
    {% for i in (0..6) %}
    <div class="ds">
      <div class="ddn">{% case i %}{% when 0 %}{{ dd0 }}{% when 1 %}{{ dd1 }}{% when 2 %}{{ dd2 }}{% when 3 %}{{ dd3 }}{% when 4 %}{{ dd4 }}{% when 5 %}{{ dd5 }}{% when 6 %}{{ dd6 }}{% endcase %}</div>
      <div class="dic">
        {% case i %}{% when 0 %}{% assign dicon = di0 %}{% when 1 %}{% assign dicon = di1 %}{% when 2 %}{% assign dicon = di2 %}{% when 3 %}{% assign dicon = di3 %}{% when 4 %}{% assign dicon = di4 %}{% when 5 %}{% assign dicon = di5 %}{% when 6 %}{% assign dicon = di6 %}{% endcase %}
        {% if dicon == "clear" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="24" cy="24" r="10"/><line x1="24" y1="2" x2="24" y2="8"/><line x1="24" y1="40" x2="24" y2="46"/><line x1="2" y1="24" x2="8" y2="24"/><line x1="40" y1="24" x2="46" y2="24"/><line x1="8.3" y1="8.3" x2="12.5" y2="12.5"/><line x1="35.5" y1="35.5" x2="39.7" y2="39.7"/><line x1="8.3" y1="39.7" x2="12.5" y2="35.5"/><line x1="35.5" y1="12.5" x2="39.7" y2="8.3"/></svg>
        {% elsif dicon == "mostly_clear" or dicon == "partly_cloudy" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="20" cy="16" r="8"/><line x1="20" y1="2" x2="20" y2="6"/><line x1="6" y1="16" x2="2" y2="16"/><line x1="9" y1="6" x2="11.5" y2="8.5"/><line x1="31" y1="6" x2="28.5" y2="8.5"/><line x1="34" y1="16" x2="36" y2="16"/><path d="M14 32 Q14 25 21 25 Q22 20 28 20 Q35 20 35 27 Q40 27 40 32 Q40 37 35 37 L18 37 Q14 37 14 32 Z"/></svg>
        {% elsif dicon == "overcast" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 34 Q12 27 19 27 Q20 22 26 22 Q33 22 33 29 Q38 29 38 34 Q38 39 33 39 L16 39 Q12 39 12 34 Z"/><path d="M20 27 Q20 21 26 21 Q27 17 32 17 Q38 17 38 23 Q42 23 42 27 Q42 30 39 31" opacity="0.5"/></svg>
        {% elsif dicon == "fog" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="8" y1="18" x2="40" y2="18"/><line x1="6" y1="24" x2="42" y2="24"/><line x1="8" y1="30" x2="40" y2="30"/><line x1="12" y1="36" x2="36" y2="36"/></svg>
        {% elsif dicon == "drizzle" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 24 Q12 17 19 17 Q20 12 26 12 Q33 12 33 19 Q38 19 38 24 Q38 29 33 29 L16 29 Q12 29 12 24 Z"/><line x1="16" y1="33" x2="15" y2="37"/><line x1="24" y1="33" x2="23" y2="37"/><line x1="32" y1="33" x2="31" y2="37"/></svg>
        {% elsif dicon == "rain" or dicon == "showers" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 22 Q12 15 19 15 Q20 10 26 10 Q33 10 33 17 Q38 17 38 22 Q38 27 33 27 L16 27 Q12 27 12 22 Z"/><line x1="14" y1="31" x2="12" y2="38"/><line x1="21" y1="31" x2="19" y2="38"/><line x1="28" y1="31" x2="26" y2="38"/><line x1="35" y1="31" x2="33" y2="38"/></svg>
        {% elsif dicon == "snow" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 22 Q12 15 19 15 Q20 10 26 10 Q33 10 33 17 Q38 17 38 22 Q38 27 33 27 L16 27 Q12 27 12 22 Z"/><line x1="16" y1="32" x2="16" y2="34"/><line x1="14.5" y1="33" x2="17.5" y2="33"/><line x1="24" y1="32" x2="24" y2="34"/><line x1="22.5" y1="33" x2="25.5" y2="33"/><line x1="32" y1="32" x2="32" y2="34"/><line x1="30.5" y1="33" x2="33.5" y2="33"/></svg>
        {% elsif dicon == "thunderstorm" %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 20 Q12 13 19 13 Q20 8 26 8 Q33 8 33 15 Q38 15 38 20 Q38 25 33 25 L16 25 Q12 25 12 20 Z"/><polyline points="22,28 18,35 24,35 20,44" stroke-width="3"/></svg>
        {% else %}
          <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="24" cy="24" r="10"/></svg>
        {% endif %}
      </div>
      <div class="dt">
        <span class="dhg">{% case i %}{% when 0 %}{{ dh0 }}{% when 1 %}{{ dh1 }}{% when 2 %}{{ dh2 }}{% when 3 %}{{ dh3 }}{% when 4 %}{{ dh4 }}{% when 5 %}{{ dh5 }}{% when 6 %}{{ dh6 }}{% endcase %}&deg;</span><span class="dlw">{% case i %}{% when 0 %}{{ dl0 }}{% when 1 %}{{ dl1 }}{% when 2 %}{{ dl2 }}{% when 3 %}{{ dl3 }}{% when 4 %}{{ dl4 }}{% when 5 %}{{ dl5 }}{% when 6 %}{{ dl6 }}{% endcase %}&deg;</span>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
